import{_ as F,r as i,g as G,c as H,a as e,w as t,b as s,d as x,p as J,e as K,o as O,f as n,t as v,E as k}from"./index-CXbMACjM.js";const Q=f=>(J("data-v-f13b7cd3"),f=f(),K(),f),W={class:"page-container"},X=Q(()=>x("div",{class:"page-title"},"备份管理",-1)),Y={class:"mb-2 flex-row"},Z={class:"mt-2 flex-row-end"},V=10,ee={__name:"Backup",setup(f){const g=i([{name:"每日全量备份",type:"全量",status:"已完成",progress:100,time:"2024-05-01 02:00"},{name:"周末增量备份",type:"增量",status:"进行中",progress:60,time:"2024-05-04 03:00"},{name:"月末全量备份",type:"全量",status:"待执行",progress:0,time:"2024-05-31 01:00"},{name:"临时增量备份",type:"增量",status:"待执行",progress:0,time:"2024-05-10 04:00"},{name:"季度全量备份",type:"全量",status:"已完成",progress:100,time:"2024-04-01 02:00"},{name:"节假日增量备份",type:"增量",status:"已完成",progress:100,time:"2024-05-02 03:00"},{name:"年度全量备份",type:"全量",status:"进行中",progress:80,time:"2024-01-01 02:00"},{name:"测试增量备份",type:"增量",status:"待执行",progress:0,time:"2024-05-12 04:00"},{name:"月初全量备份",type:"全量",status:"已完成",progress:100,time:"2024-05-01 01:00"},{name:"周中增量备份",type:"增量",status:"进行中",progress:40,time:"2024-05-08 03:00"},{name:"特殊全量备份",type:"全量",status:"待执行",progress:0,time:"2024-05-20 02:00"},{name:"临时全量备份",type:"全量",status:"已完成",progress:100,time:"2024-05-15 02:00"},{name:"周五增量备份",type:"增量",status:"进行中",progress:20,time:"2024-05-17 03:00"},{name:"月末增量备份",type:"增量",status:"待执行",progress:0,time:"2024-05-31 04:00"},{name:"年度增量备份",type:"增量",status:"已完成",progress:100,time:"2024-01-01 03:00"}]),m=i(!1),y=i(!1),u=i({name:"",type:""}),r=i({}),b=i(""),c=i(1),C=G(()=>b.value?g.value.filter(o=>o.type===b.value):g.value);function B(){!u.value.name||!u.value.type||(g.value.push({name:u.value.name,type:u.value.type,status:"待执行",progress:0,time:new Date().toLocaleString()}),m.value=!1,u.value={name:"",type:""},k.success("新建任务成功"))}function D(o){g.value.splice(o,1),k.success("删除任务成功")}function E(o){r.value={...o},y.value=!0}function N(o){if(o.progress===100)return;o.status="进行中";let l=setInterval(()=>{o.progress<100?o.progress+=10:(o.status="已完成",clearInterval(l),k.success("任务执行完成"))},300)}function T(o){switch(o){case"已完成":return"success";case"进行中":return"warning";case"待执行":return"info";default:return""}}return(o,l)=>{const p=s("el-button"),w=s("el-option"),$=s("el-select"),d=s("el-table-column"),h=s("el-tag"),I=s("el-progress"),q=s("el-space"),L=s("el-table"),M=s("el-pagination"),P=s("el-card"),R=s("el-input"),S=s("el-form-item"),j=s("el-form"),U=s("el-dialog"),_=s("el-descriptions-item"),A=s("el-descriptions");return O(),H("div",W,[X,e(P,{class:"card-padding"},{default:t(()=>[x("div",Y,[e(p,{type:"primary",onClick:l[0]||(l[0]=a=>m.value=!0)},{default:t(()=>[n("新建备份任务")]),_:1}),e($,{modelValue:b.value,"onUpdate:modelValue":l[1]||(l[1]=a=>b.value=a),placeholder:"筛选类型",clearable:"",class:"ml-2",style:{width:"140px"}},{default:t(()=>[e(w,{label:"全量备份",value:"全量"}),e(w,{label:"增量备份",value:"增量"})]),_:1},8,["modelValue"])]),e(L,{data:C.value.slice((c.value-1)*V,c.value*V),style:{width:"100%"}},{default:t(()=>[e(d,{prop:"name",label:"任务名称",width:"180"}),e(d,{prop:"type",label:"类型",width:"100"}),e(d,{prop:"status",label:"状态",width:"120"},{default:t(a=>[e(h,{type:T(a.row.status)},{default:t(()=>[n(v(a.row.status),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"progress",label:"进度",width:"140"},{default:t(a=>[e(I,{percentage:a.row.progress,status:a.row.progress===100?"success":"active","text-inside":!0,"stroke-width":18},null,8,["percentage","status"])]),_:1}),e(d,{prop:"time",label:"创建时间",width:"160"}),e(d,{label:"操作"},{default:t(a=>[e(q,null,{default:t(()=>[e(p,{size:"small",onClick:z=>E(a.row)},{default:t(()=>[n("详情")]),_:2},1032,["onClick"]),e(p,{size:"small",type:"success",disabled:a.row.progress===100,onClick:z=>N(a.row)},{default:t(()=>[n("执行")]),_:2},1032,["disabled","onClick"]),e(p,{size:"small",type:"danger",onClick:z=>D(a.$index+(c.value-1)*V)},{default:t(()=>[n("删除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),x("div",Z,[e(M,{background:"",layout:"prev, pager, next",total:C.value.length,"page-size":V,"current-page":c.value,"onUpdate:currentPage":l[2]||(l[2]=a=>c.value=a)},null,8,["total","current-page"])])]),_:1}),e(U,{modelValue:m.value,"onUpdate:modelValue":l[6]||(l[6]=a=>m.value=a),title:"新建备份任务",width:"400px"},{footer:t(()=>[e(p,{onClick:l[5]||(l[5]=a=>m.value=!1)},{default:t(()=>[n("取消")]),_:1}),e(p,{type:"primary",onClick:B},{default:t(()=>[n("确定")]),_:1})]),default:t(()=>[e(j,{model:u.value},{default:t(()=>[e(S,{label:"任务名称",required:""},{default:t(()=>[e(R,{modelValue:u.value.name,"onUpdate:modelValue":l[3]||(l[3]=a=>u.value.name=a)},null,8,["modelValue"])]),_:1}),e(S,{label:"类型",required:""},{default:t(()=>[e($,{modelValue:u.value.type,"onUpdate:modelValue":l[4]||(l[4]=a=>u.value.type=a),placeholder:"请选择类型"},{default:t(()=>[e(w,{label:"全量备份",value:"全量"}),e(w,{label:"增量备份",value:"增量"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(U,{modelValue:y.value,"onUpdate:modelValue":l[8]||(l[8]=a=>y.value=a),title:"任务详情",width:"400px"},{footer:t(()=>[e(p,{onClick:l[7]||(l[7]=a=>y.value=!1)},{default:t(()=>[n("关闭")]),_:1})]),default:t(()=>[e(A,{column:1,border:""},{default:t(()=>[e(_,{label:"任务名称"},{default:t(()=>[n(v(r.value.name),1)]),_:1}),e(_,{label:"类型"},{default:t(()=>[n(v(r.value.type),1)]),_:1}),e(_,{label:"状态"},{default:t(()=>[e(h,{type:T(r.value.status)},{default:t(()=>[n(v(r.value.status),1)]),_:1},8,["type"])]),_:1}),e(_,{label:"进度"},{default:t(()=>[e(I,{percentage:r.value.progress,status:r.value.progress===100?"success":"active"},null,8,["percentage","status"])]),_:1}),e(_,{label:"创建时间"},{default:t(()=>[n(v(r.value.time),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},ae=F(ee,[["__scopeId","data-v-f13b7cd3"]]);export{ae as default};
